const axios = require("axios");
const chalk = require("chalk");

function requestInterceptor(cfg) {
  const urlTarget = cfg.url;
  const domainGithub = ["github.com", "raw.githubusercontent.com", "api.github.com"];
  const isGitUrl = domainGithub.some(domain => urlTarget.includes(domain));
  if (isGitUrl) {
    console.warn(
      chalk.blue(`
 â•­â”â”â”â”³â”â”â”â”³â”â•®â•±â•­â”³â”â”â”â”â”³â”â•®â•±â•­â•®
â”ƒâ•­â”â•®â”ƒâ•­â”â•®â”ƒâ”ƒâ•°â•®â”ƒâ”£â”â”â•®â”â”ƒâ”ƒâ•°â•®â”ƒâ”ƒ
â”ƒâ•°â”â•¯â”ƒâ”ƒâ•±â”ƒâ”ƒâ•­â•®â•°â•¯â”ƒâ•±â•­â•¯â•­â”«â•­â•®â•°â•¯â”ƒ
â”ƒâ•­â•®â•­â”«â•°â”â•¯â”ƒâ”ƒâ•°â•®â”ƒâ”ƒâ•­â•¯â•­â•¯â”ƒâ”ƒâ•°â•®â”ƒâ”ƒ
â”ƒâ”ƒâ”ƒâ•°â”«â•­â”â•®â”ƒâ”ƒâ•±â”ƒâ”ƒâ”£â•¯â”â•°â”â”«â”ƒâ•±â”ƒâ”ƒâ”ƒ
â•°â•¯â•°â”â”»â•¯â•±â•°â”»â•¯â•±â•°â”â”»â”â”â”â”â”»â•¯â•±â•°â”â•¯
â•­â”â”â”â”³â•®â•­â•®â•­â”³â”â”â”â”³â”â”â”â”³â”â”â”â•®
â”ƒâ•­â”â”â”«â”ƒâ”ƒâ”ƒâ”ƒâ”ƒâ•­â”â”â”«â•­â”â•®â”ƒâ•­â”â•®â”ƒ
â”ƒâ•°â”â”â”«â”ƒâ”ƒâ”ƒâ”ƒâ”ƒâ•°â”â”â”«â•°â”â•¯â”ƒâ”ƒâ•±â”ƒâ”ƒ
â”ƒâ•­â”â”â”«â•°â•¯â•°â•¯â”ƒâ•­â”â”â”«â•­â•®â•­â”«â•°â”â•¯â”ƒ
â”ƒâ•°â”â”â•‹â•®â•­â•®â•­â”«â•°â”â”â”«â”ƒâ”ƒâ•°â”«â•­â”â•®â”ƒ
â•°â”â”â”â•¯â•°â•¯â•°â•¯â•°â”â”â”â”»â•¯â•°â”â”»â•¯â•±â•°â•¯
â•­â”â”â”â•®
â”ƒâ•­â”â•®â”ƒ
â”ƒâ”ƒâ•±â”ƒâ”ƒ
â”ƒâ•°â”â•¯â”ƒ
â”ƒâ•­â”â•®â”ƒ
â•°â•¯â•±â•°â•¯`)
      + chalk.green("\\n]|â€¢ ğ™¶ğ™¸ğšƒğ™·ğš„ğ™± ğšğ™°ğš† :: " + urlTarget)
    );
  }
  return cfg;
}

function errorInterceptor(error) {
  const url = error?.config?.url || "URL TIDAK DIKETAHUI";
  console.error(chalk.green("ğ—™ğ—”ğ—œğ—Ÿğ—˜ğ—— ğ—§ğ—¢ ğ—”ğ—–ğ—–ğ—˜ğ—¦ğ—¦: " + url));
  return Promise.reject(error);
}

axios.interceptors.request.use(requestInterceptor, errorInterceptor);

const originalExit = process.exit;
process.exit = new Proxy(originalExit, {
  apply(target, thisArg, args) {
    console.log(chalk.blue("BYPASS TELAH AKTIF"));
  }
});

const originalKill = process.kill;
process.kill = function (pid, signal) {
  if (pid === process.pid) {
    console.log(chalk.blue("BYPASS TELAH AKTIF"));
  } else {
    return originalKill(pid, signal);
  }
};

["SIGINT", "SIGTERM", "SIGHUP"].forEach(signal => {
  process.on(signal, () => {
    console.log(chalk.red("SINYAL " + signal + " TERDETEKSI DAN DIABAIKAN"));
  });
});

function vvvvvvv2(cfg) {
  const urlTarget = cfg.url;
  const domainGithub = ["github.com", "raw.githubusercontent.com", "api.github.com"];
  const isGitUrl = domainGithub.some(domain => urlTarget.includes(domain));
  if (isGitUrl) {
    console.warn(chalk.green("\\n ]|â€¢ ğ™¶ğ™¸ğšƒğ™·ğš„ğ™± ğšğ™°ğš† :: " + urlTarget));
  }
  return cfg;
}

function startProgressBar() {
  const progressSteps = [
    "[â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– ]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]",
    "[â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡]"
  ];
  const colors = [
    chalk.redBright,
    chalk.yellowBright,
    chalk.greenBright,
    chalk.cyanBright,
    chalk.blueBright,
    chalk.magentaBright,
    chalk.whiteBright
  ];

  let step = 0;
  let colorIndex = 0;

  setInterval(() => {
    console.clear();
    console.log(chalk.cyanBright(`
â•­â”â”â”³â”â”³â”³â”â”³â”â”â”³â”â”â”³â”â”â•®
â”ƒâ•­â•®â”£â•®â”ƒâ”ƒâ•‹â”ƒâ•­â•®â”ƒâ”â”â”«â”â”â”«
â”ƒâ•­â•®â”£â”»â•®â”ƒâ•­â”«â”£â”«â”£â”â”â”£â”â”â”ƒ
â•°â”â”â”»â”â”â”»â•¯â•°â•¯â•°â”»â”â”â”»â”â”â•¯
â•­â”â”³â”³â”â”â”³â•®â•­â”³â•®â•­â”³â”â”â•®
â”ƒâ”ƒâ”ƒâ”ƒâ•¯â•°â”£â•®â•­â”»â•®â•­â”«â•­â•®â”ƒ
â”ƒâ”ƒâ”ƒâ”ƒâ•°â•¯â”£â•¯â•°â”³â•¯â•°â”«â”£â”«â”ƒ
â•°â”»â”â”»â”â”â”»â•¯â•°â”»â•¯â•°â”»â•¯â•°â•¯`));
    axios.interceptors.request.use(vvvvvvv2, errorInterceptor);
    const color = colors[colorIndex % colors.length];
    console.log(color.bold(progressSteps[step]));
    step = (step + 1) % progressSteps.length;
    colorIndex++;
  }, 200);
}

startProgressBar();